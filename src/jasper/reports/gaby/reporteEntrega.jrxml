<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="renta" pageWidth="695" pageHeight="900" columnWidth="655" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="af0ab36d-faf5-45a3-a784-d9f82f7a9acc">
	<property name="ireport.zoom" value="4.279675059165052"/>
	<property name="ireport.x" value="50"/>
	<property name="ireport.y" value="315"/>
	<parameter name="RENTA_ID" class="java.lang.String"/>
	<parameter name="NOMBRE_CLIENTE" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\Carlos Alberto\\Documents\\NetBeansProjects\\mobiliario\\reportes\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="FECHA_EVENTO" class="java.lang.String"/>
	<parameter name="FECHA_ENTREGA" class="java.lang.String"/>
	<parameter name="FECHA_RECOLECCION" class="java.lang.String"/>
	<parameter name="DESCRIPCION_EVENTO" class="java.lang.String"/>
	<parameter name="FOLIO" class="java.lang.String"/>
	<parameter name="COMENTARIO_EVENTO" class="java.lang.String"/>
	<parameter name="URL_IMAGEN" class="java.lang.String"/>
	<parameter name="TIPO_EVENTO" class="java.lang.String"/>
	<parameter name="NOMBRE_USUARIO" class="java.lang.String"/>
	<parameter name="NOMBRE_CHOFER" class="java.lang.String"/>
	<parameter name="TELEFONOS_CLIENTE" class="java.lang.String"/>
	<parameter name="FECHA_PEDIDO" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT * FROM(
SELECT
articulo.codigo AS codigo,
detalle_renta.cantidad AS cantidad,
CONCAT(articulo.descripcion," ",color.color) AS articulo,
categoria.descripcion AS categoria,
"" AS comentario,
articulo.image AS image_item
FROM detalle_renta AS detalle_renta
INNER JOIN articulo articulo ON (articulo.id_articulo = detalle_renta.id_articulo)
INNER JOIN categoria categoria ON (categoria.id_categoria = articulo.id_categoria)
INNER JOIN color color ON (color.id_color = articulo.id_color)
WHERE detalle_renta.id_renta = $P{RENTA_ID}
UNION
SELECT
CONCAT("* ",articulo_relation.codigo) AS codigo,
((
	SELECT detalle_renta.cantidad
	FROM detalle_renta detalle_renta
    WHERE detalle_renta.id_articulo = desglose_almacen.item_init_id
    AND detalle_renta.id_renta = $P{RENTA_ID}
)*desglose_almacen.amount) AS cantidad,
CONCAT(articulo_relation.descripcion," ",color_articulo_relation.color) AS articulo,
categoria_item_relation.descripcion AS categoria,
desglose_almacen.comment AS comentario,
articulo_relation.image AS image_item
FROM desglose_almacen desglose_almacen
INNER JOIN articulo articulo_relation ON (articulo_relation.id_articulo = desglose_almacen.item_relation_id)
INNER JOIN categoria categoria_item_relation ON (categoria_item_relation.id_categoria = articulo_relation.id_categoria)
INNER JOIN color color_articulo_relation ON (color_articulo_relation.id_color = articulo_relation.id_color)
WHERE desglose_almacen.item_init_id IN (
	SELECT detalle_renta.id_articulo
	FROM detalle_renta detalle_renta
    WHERE detalle_renta.id_renta = $P{RENTA_ID}
    )
AND desglose_almacen.fg_active = 1
) a ORDER BY codigo DESC, articulo]]>
	</queryString>
	<field name="cantidad" class="java.lang.String"/>
	<field name="codigo" class="java.lang.String"/>
	<field name="articulo" class="java.lang.String"/>
	<field name="categoria" class="java.lang.String"/>
	<field name="comentario" class="java.lang.String"/>
	<field name="image_item" class="java.io.InputStream"/>
	<pageHeader>
		<band height="123">
			<textField>
				<reportElement x="0" y="20" width="316" height="14" uuid="cf2b42e2-14fc-43af-8594-74545538abc8"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["Cliente: "+$P{NOMBRE_CLIENTE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="55" width="522" height="14" uuid="bf7a0c42-eb64-4a72-bb77-f1cdd17ecddd"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["Fecha de elaboración del pedido: "+$P{FECHA_PEDIDO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="72" width="522" height="28" uuid="776bb686-563e-4dae-8289-87002897f527"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{DESCRIPCION_EVENTO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="0" width="86" height="20" uuid="d85f5de2-799f-45cb-a9b7-acaa123e12f1"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["Folio: "+$P{FOLIO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="315" y="20" width="207" height="14" uuid="544b1405-6a1e-4184-81d7-cef508b6e039"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["Tipo: "+$P{TIPO_EVENTO}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="86" y="0" width="436" height="20" uuid="2f7ef6a1-9a0a-45dc-b4b5-c4bccb8a5680"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[R E P O R T E   D E   E N T R E G A ]]></text>
			</staticText>
			<image>
				<reportElement x="535" y="0" width="120" height="120" uuid="af06c2bc-4f98-4b30-9aec-d7c54d99d194"/>
				<imageExpression><![CDATA[$P{URL_IMAGEN}]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="0" y="106" width="523" height="14" forecolor="#666666" uuid="b7635c00-d060-4233-a0c7-012aa57d07b2"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<text><![CDATA[* Desglose de almacen por artículo.]]></text>
			</staticText>
			<textField>
				<reportElement x="0" y="38" width="315" height="14" uuid="dca48696-d5f9-4b5f-a374-fe841d4fe980"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["Telefonos del cliente: "+$P{TELEFONOS_CLIENTE}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="16">
			<staticText>
				<reportElement x="0" y="2" width="51" height="14" uuid="1e13b5fe-fa7e-481d-83aa-4a384e860ea7"/>
				<textElement>
					<font fontName="Arial" size="10"/>
				</textElement>
				<text><![CDATA[Cant]]></text>
			</staticText>
			<staticText>
				<reportElement x="111" y="2" width="377" height="14" uuid="c42a8804-092f-45b6-af5a-a5127c1539bd"/>
				<textElement>
					<font fontName="Arial" size="10"/>
				</textElement>
				<text><![CDATA[Artículo]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="0" width="655" height="1" forecolor="#999999" uuid="0e24976b-4d00-4ad4-bb68-4ef125311120"/>
			</line>
			<staticText>
				<reportElement x="62" y="2" width="45" height="14" uuid="be94d05f-d476-4186-87c3-5721003d7dfc"/>
				<textElement>
					<font fontName="Arial" size="10"/>
				</textElement>
				<text><![CDATA[Código]]></text>
			</staticText>
			<staticText>
				<reportElement x="488" y="1" width="71" height="14" uuid="72838e99-5ae6-43b6-a309-a81dff396f4d"/>
				<textElement>
					<font fontName="Arial" size="10"/>
				</textElement>
				<text><![CDATA[Categoría]]></text>
			</staticText>
			<staticText>
				<reportElement x="559" y="2" width="96" height="14" uuid="6fe1eee3-3050-4e4a-b65a-f16af656545d"/>
				<textElement>
					<font fontName="Arial" size="10"/>
				</textElement>
				<text><![CDATA[Comentario]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="28" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="22" height="26" forecolor="#666666" uuid="cd0dc678-302e-4d48-aa9d-4788290ceeb4"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cantidad}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="111" y="0" width="377" height="26" forecolor="#666666" uuid="acbde3cb-1664-4020-bbee-637fbb28294e"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{articulo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="62" y="0" width="45" height="26" forecolor="#666666" uuid="d8451bc6-e583-4226-a37c-f8f91db78b8c"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{codigo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="488" y="0" width="71" height="26" forecolor="#666666" uuid="e1e5e770-7e58-4a5f-a6c8-64ea7ed46577"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{categoria}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="559" y="1" width="96" height="25" forecolor="#666666" uuid="3173cfd6-0918-40c2-a99b-ea3796fff8be"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{comentario}]]></textFieldExpression>
			</textField>
			<image scaleImage="FillFrame">
				<reportElement x="28" y="1" width="29" height="25" uuid="67f4c6d8-7d71-421f-a92d-13d9942b4e54"/>
				<imageExpression><![CDATA[$F{image_item}]]></imageExpression>
			</image>
			<line>
				<reportElement x="0" y="26" width="655" height="1" forecolor="#E7E7E7" uuid="173459cc-bc7f-44dd-8bda-1410cdc53ce7"/>
			</line>
		</band>
	</detail>
	<columnFooter>
		<band height="229">
			<textField>
				<reportElement x="0" y="85" width="655" height="100" uuid="27536c0b-ff9f-4a6b-b9dc-f106ad6c9edb"/>
				<textElement>
					<font fontName="Arial" size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{COMENTARIO_EVENTO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="205" width="655" height="20" uuid="4817bd89-272d-44fc-8f00-5d8a61f2eb5f"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["Atendió: "+$P{NOMBRE_USUARIO}]]></textFieldExpression>
			</textField>
			<textField pattern="">
				<reportElement x="0" y="185" width="655" height="20" uuid="60881411-e324-4b2c-9ddb-9b7ea12c0ee2"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["Chofer: "+$P{NOMBRE_CHOFER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="25" width="655" height="20" uuid="5f87aac2-d5c3-47d5-8d46-803ff9826c76"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["Fecha de devolucion: "+$P{FECHA_RECOLECCION}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="5" width="655" height="20" uuid="5f36e1f3-ce07-4290-a4b0-6f383aa8036a"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["Fecha de entrega: "+$P{FECHA_ENTREGA}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="65" width="186" height="20" uuid="c20735a4-101d-44c3-8034-370369a76892"/>
				<textElement>
					<font fontName="Arial" size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[C O M E N T A R I O S :]]></text>
			</staticText>
			<line>
				<reportElement x="1" y="225" width="654" height="1" forecolor="#999999" uuid="a3c0cc4f-2c07-4721-9328-062fcd2ed66f"/>
			</line>
			<textField>
				<reportElement x="0" y="45" width="655" height="20" uuid="03bd5e30-4ee1-43fa-8b9f-9e2b81797f57"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["Fecha del evento: "+$P{FECHA_EVENTO}]]></textFieldExpression>
			</textField>
		</band>
	</columnFooter>
	<pageFooter>
		<band height="22">
			<textField pattern="EEEEE dd MMMMM yyyy">
				<reportElement x="0" y="0" width="327" height="20" uuid="a0599559-33c9-49f3-8c1a-4f74889cfa20"/>
				<textElement>
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA["Fecha impresion: "+new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="535" y="0" width="80" height="20" uuid="1d327f29-875f-4b27-a5ca-b52382e4ca81"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="615" y="0" width="40" height="20" uuid="45d27ca4-9d7d-4cdf-a413-f68ec96b101b"/>
				<textElement>
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
