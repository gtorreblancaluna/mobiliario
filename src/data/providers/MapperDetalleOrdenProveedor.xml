<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="MapperDetalleOrdenProveedor">
  
    <resultMap id="resultDetailOrderProvider" type="model.providers.DetalleOrdenProveedor">        
        
        <result property="id" column="id"/>
        <result property="idOrdenProveedor" column="id_orden_proveedor"/>
        <result property="cantidad" column="cantidad"/>
        <result property="precio" column="precio"/>        
        <result property="tipoOrden" column="tipo_orden"/>
        <result property="fgActivo" column="fg_activo"/>
        <result property="creado" column="creado"/>
        <result property="actualizado" column="actualizado"/>  
        
        <result property="articulo.articuloId" column="articulo_id"/> 
        <result property="articulo.descripcion" column="articulo_descripcion"/> 
        <result property="articulo.color.color" column="articulo_color"/>  
             
    </resultMap>
  
    <select id="getDetailOrderProviderByOrdenProviderId" resultMap="resultDetailOrderProvider" parameterType="java.lang.Integer" >
        SELECT d.*,
            a.articulo_id AS articulo_id,
            a.descripcion AS articulo_descripcion,
            c.color AS articulo_color
        FROM detalle_orden_proveedor d
            INNER JOIN articulo a ON (a.id_articulo = d.id_articulo)
            INNER JOIN color c ON (c.id_color = a.id_color)
        WHERE d.fg_activo = '1'
        AND d.id_orden_proveedor = #{ordenProviderId}
    </select>  
  
</mapper>